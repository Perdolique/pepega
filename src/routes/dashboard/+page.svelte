<script lang="ts">
  import { enhance } from '$app/forms'
  import { userState } from '$lib/state/user.svelte'
  import { goto } from '$app/navigation'
  import type { SubmitFunction } from './$types';

  const onSubmit : SubmitFunction = () => {
		return async ({ update, result }) => {
			await update()

			if (result.type === 'success') {
        userState.resetAuth()

        goto('/')
      }
		};
	}
</script>

<h1>Ğ¢Ğ²Ğ¾Ğ¹ Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ´Ğ°ÑˆĞ±Ğ¾Ñ€Ğ´, Ğ±Ñ€Ğ°Ñ‚Ğ¸ÑˆĞºĞ° ğŸ˜</h1>

<form
  action="?/logout"
  method="POST"
  use:enhance={onSubmit}
>
  <button type="submit">
    Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ¸Ğ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ ğŸ‘‹
  </button>
</form>
